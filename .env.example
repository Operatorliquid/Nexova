# ══════════════════════════════════════════════════════════════════════════════
# NEXOVA - Environment Configuration
# ══════════════════════════════════════════════════════════════════════════════

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ APPLICATION                                                                 │
# └─────────────────────────────────────────────────────────────────────────────┘
NODE_ENV=development
LOG_LEVEL=debug
API_PORT=3000
API_HOST=0.0.0.0
CORS_ORIGIN=http://localhost:5173,http://localhost:5174
API_PUBLIC_URL=http://localhost:3000
DASHBOARD_URL=http://localhost:5173
LANDING_URL=http://localhost:5174

# Frontend envs (Vite)
VITE_API_URL=http://localhost:3000
VITE_DASHBOARD_URL=http://localhost:5173

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ DATABASE                                                                    │
# └─────────────────────────────────────────────────────────────────────────────┘
DATABASE_URL="postgresql://nexova:nexova_secret@localhost:5432/nexova_dev?schema=public"

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ REDIS                                                                       │
# └─────────────────────────────────────────────────────────────────────────────┘
REDIS_URL="redis://localhost:6379"

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ AUTHENTICATION (JWT)                                                        │
# └─────────────────────────────────────────────────────────────────────────────┘
# Generate secrets with: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
JWT_ACCESS_SECRET=your-access-token-secret-change-in-production
JWT_REFRESH_SECRET=your-refresh-token-secret-change-in-production
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
COOKIE_SECRET=your-cookie-secret-change-in-production

# Optional cookie controls (recommended for cross-domain prod setup)
# AUTH_COOKIE_SAMESITE=lax

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ ENCRYPTION (for API keys storage)                                           │
# └─────────────────────────────────────────────────────────────────────────────┘
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ENCRYPTION_KEY=your-32-byte-encryption-key-base64-encoded

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ WHATSAPP (Providers)                                                        │
# └─────────────────────────────────────────────────────────────────────────────┘
# Infobip (Nexova-managed numbers). Global credentials.
# INFOBIP_BASE_URL=https://xxxxxx.api.infobip.com
# INFOBIP_API_KEY=your-infobip-api-key

# Evolution API (QR connect per workspace). Enable Evolution in UI by setting both.
# EVOLUTION_BASE_URL=https://your-evolution-server.com
# EVOLUTION_API_KEY=your-evolution-api-key

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ LLM (Claude) - Set via Admin Panel or here                                  │
# └─────────────────────────────────────────────────────────────────────────────┘
# Can also be configured in Admin Panel > Settings
ANTHROPIC_API_KEY=your-anthropic-api-key
LLM_MODEL=claude-sonnet-4-20250514
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.7

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ BILLING (Stripe)                                                           │
# └─────────────────────────────────────────────────────────────────────────────┘
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxx
# Optional: override monthly prices in cents (USD)
# STRIPE_PRICE_BASIC_MONTHLY_CENTS=2900
# STRIPE_PRICE_STANDARD_MONTHLY_CENTS=5900
# STRIPE_PRICE_PRO_MONTHLY_CENTS=9900

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ GOOGLE OAUTH (for billing register flow)                                   │
# └─────────────────────────────────────────────────────────────────────────────┘
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/api/v1/billing/auth/google/callback

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ MAILER (email verification)                                                │
# └─────────────────────────────────────────────────────────────────────────────┘
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM="Nexova <no-reply@bynexova.com>"
SMTP_SECURE=false

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ OBSERVABILITY                                                               │
# └─────────────────────────────────────────────────────────────────────────────┘
SENTRY_DSN=
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ FEATURE FLAGS                                                               │
# └─────────────────────────────────────────────────────────────────────────────┘
ENABLE_AGENT_HANDOFF=true
AGENT_FAILURE_THRESHOLD=3
SESSION_TIMEOUT_MINUTES=30
